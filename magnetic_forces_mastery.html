<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magnetic Forces and Fields Mastery Dashboard</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    h1 {
      color: #667eea;
      text-align: center;
      margin-bottom: 10px;
      font-size: 2.5em;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 1.1em;
    }

    .section {
      margin-bottom: 40px;
      padding: 25px;
      background: #f8f9fa;
      border-left: 5px solid #667eea;
      border-radius: 10px;
    }

    .section h2 {
      color: #333;
      margin-bottom: 20px;
      font-size: 1.5em;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .progress {
      margin-bottom: 20px;
    }

    .progress > div:first-child {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-weight: bold;
      color: #333;
      font-size: 0.95em;
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      transition: width 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.75em;
      font-weight: bold;
    }

    .question-container {
      background: white;
      padding: 20px;
      margin-bottom: 15px;
      border-radius: 8px;
      border-left: 5px solid #e0e0e0;
      transition: all 0.3s ease;
    }

    .question-container.completed {
      border-left-color: #4caf50;
      background: #f1f8f6;
    }

    .question-text {
      font-weight: bold;
      color: #333;
      margin-bottom: 15px;
      font-size: 1em;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 15px;
    }

    .option-label {
      display: flex;
      align-items: flex-start;
      padding: 12px;
      background: #f9f9f9;
      border: 2px solid #ddd;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      gap: 10px;
    }

    .option-label:hover {
      border-color: #667eea;
      background: #f0f4ff;
    }

    .option-label input[type="radio"] {
      margin-top: 3px;
      cursor: pointer;
      accent-color: #667eea;
    }

    .option-text {
      flex: 1;
      line-height: 1.4;
    }

    .option-label.selected {
      border-color: #667eea;
      background: #e8ecff;
    }

    .feedback {
      margin-top: 12px;
      padding: 12px;
      border-radius: 6px;
      font-size: 0.95em;
      display: none;
    }

    .feedback.show {
      display: block;
    }

    .feedback.correct {
      background: #e8f5e9;
      color: #2e7d32;
      border-left: 4px solid #4caf50;
    }

    .feedback.incorrect {
      background: #fff3cd;
      color: #856404;
      border-left: 4px solid #ffc107;
    }

    .button-group {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      font-size: 0.95em;
      transition: all 0.2s ease;
    }

    .check-btn {
      background: #f44336;
      color: white;
    }

    .check-btn:hover:not(:disabled) {
      background: #d32f2f;
      transform: translateY(-2px);
    }

    .check-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .hint-btn {
      background: #ff9800;
      color: white;
    }

    .hint-btn:hover:not(:disabled) {
      background: #f57c00;
    }

    .hint-text {
      margin-top: 10px;
      padding: 12px;
      background: #fff3e0;
      border-left: 4px solid #ff9800;
      border-radius: 4px;
      display: none;
      font-size: 0.95em;
      color: #e65100;
    }

    .hint-text.show {
      display: block;
    }

    .attempt-counter {
      font-size: 0.85em;
      color: #999;
      margin-top: 8px;
      font-style: italic;
    }

    .mastery-screen {
      display: none;
      text-align: center;
      padding: 50px 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 10px;
      margin-bottom: 30px;
    }

    .mastery-screen.show {
      display: block;
      animation: slideIn 0.5s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .mastery-screen h2 {
      font-size: 2.5em;
      margin-bottom: 20px;
    }

    .mastery-screen p {
      font-size: 1.1em;
      margin: 10px 0;
    }

    .emoji {
      font-size: 1.2em;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üß≤ Magnetic Forces and Fields</h1>
    
    <div id="masteryScreen" class="mastery-screen">
      <h2>üéâ MASTERY ACHIEVED!</h2>
      <p>You've completed all sections of this unit!</p>
      <p>Excellent understanding of magnetic forces and fields!</p>
      <p style="margin-top: 20px; font-size: 1em;">üåü Ready for advanced applications!</p>
    </div>
    
    <!-- CONCEPTUAL QUESTIONS SECTION -->
    <div class="section">
      <h2><span class="emoji">üß†</span> Conceptual Understanding</h2>
      <div class="progress">
        <div>
          <span>Progress: <span id="conceptualProgress">0</span>/4</span>
          <span id="conceptualPercent">0%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="conceptualBar" style="width: 0%"></div>
        </div>
      </div>
      <div id="conceptualContainer"></div>
    </div>

    <!-- HAND RULES SECTION -->
    <div class="section">
      <h2><span class="emoji">ü§ö</span> Hand Rules & Direction</h2>
      <div class="progress">
        <div>
          <span>Progress: <span id="handProgress">0</span>/3</span>
          <span id="handPercent">0%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="handBar" style="width: 0%"></div>
        </div>
      </div>
      <div id="handContainer"></div>
    </div>

    <!-- CALCULATIONS SECTION -->
    <div class="section">
      <h2><span class="emoji">üî¢</span> Lorentz Force Calculations</h2>
      <div class="progress">
        <div>
          <span>Progress: <span id="calcProgress">0</span>/3</span>
          <span id="calcPercent">0%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="calcBar" style="width: 0%"></div>
        </div>
      </div>
      <div id="calcContainer"></div>
    </div>

    <!-- ADVANCED CONCEPTS SECTION -->
    <div class="section">
      <h2><span class="emoji">‚öôÔ∏è</span> Advanced Concepts</h2>
      <div class="progress">
        <div>
          <span>Progress: <span id="advancedProgress">0</span>/3</span>
          <span id="advancedPercent">0%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="advancedBar" style="width: 0%"></div>
        </div>
      </div>
      <div id="advancedContainer"></div>
    </div>
  </div>

  <script>
    // Conceptual Understanding Questions
    const conceptualQuestions = [
      {
        question: "What is the fundamental cause of magnetism?",
        options: [
          "Stationary electrical charges",
          "Moving charges and unpaired electrons",
          "The Earth's core",
          "Permanent magnets only"
        ],
        correct: 1,
        feedback: [
          "Stationary charges create electric fields, not magnetic fields.",
          "‚úì Correct! Magnetism is the result of moving charges. Atoms with more unpaired electrons have stronger magnetic moments.",
          "The Earth's magnetic field is generated by moving charges in the outer core.",
          "Even permanent magnets exist because of aligned atoms with moving electrons."
        ],
        hint: "Think about what atoms with magnetic properties have in common."
      },
      {
        question: "How are magnetic domains related to permanent magnets?",
        options: [
          "Domains are regions where magnetism is cancelled out",
          "Domains only exist in temporary magnets",
          "Domains are groups of atoms with aligned magnetic properties that create the north and south poles",
          "Domains are created by electricity only"
        ],
        correct: 2,
        feedback: [
          "Actually, aligned domains create the magnetic field.",
          "Domains exist in all magnets.",
          "‚úì Correct! Permanent magnets have permanently aligned magnetic domains, resulting in distinct north and south poles.",
          "Domains can be created by various means, including current and heat."
        ],
        hint: "Remember that 'domain' means a region or area with specific properties."
      },
      {
        question: "A current-carrying wire experiences a force in a magnetic field. What determines the direction of this force?",
        options: [
          "Only the direction of the current",
          "Only the direction of the magnetic field",
          "Both the magnetic field direction AND the perpendicular component of current (or velocity for moving charges)",
          "The color of the wire"
        ],
        correct: 2,
        feedback: [
          "The force also depends on the magnetic field direction.",
          "The force also depends on the current direction.",
          "‚úì Correct! The force is perpendicular to BOTH the magnetic field and the velocity of the charge.",
          "The physical properties of the wire don't determine the direction of the magnetic force."
        ],
        hint: "The force direction depends on TWO vector quantities."
      },
      {
        question: "In a uniform magnetic field, why does a moving charged particle follow a circular path?",
        options: [
          "The particle gets tired and slows down",
          "The magnetic force is always perpendicular to the velocity, causing continuous direction change without changing speed",
          "The magnetic field is stronger in circular regions",
          "Gravity pulls the particle into a circle"
        ],
        correct: 1,
        feedback: [
          "The speed of the particle doesn't change, only direction.",
          "‚úì Exactly! A force perpendicular to velocity changes direction without changing speed, resulting in circular motion.",
          "The magnetic field is uniform (constant) throughout.",
          "Gravity is separate from the magnetic force in this scenario."
        ],
        hint: "Think about what happens when a force is always perpendicular to an object's motion."
      }
    ];

    // Hand Rules & Direction Questions
    const handQuestions = [
      {
        question: "You have a positive charge moving to the right with a magnetic field pointing upward (toward you). Using the right hand rule, which direction is the magnetic force?",
        options: [
          "To the left",
          "Downward (away)",
          "Into the page",
          "Out of the page"
        ],
        correct: 2,
        feedback: [
          "Point your fingers right (velocity), curl toward up (field). Your thumb points INTO the page.",
          "Recheck your hand position.",
          "‚úì Correct! For a positive charge: point fingers in direction of velocity (right), curl them toward the magnetic field (up), and your thumb points into the page (force direction).",
          "That would be if the field pointed away."
        ],
        hint: "Right hand rule: fingers point in velocity direction, curl toward B field, thumb shows force direction."
      },
      {
        question: "An electron (negative charge) is moving upward with a magnetic field pointing to the right. What is the direction of the magnetic force?",
        options: [
          "Upward",
          "Downward",
          "Into the page",
          "Out of the page"
        ],
        correct: 3,
        feedback: [
          "You must use the LEFT hand rule for negative charges.",
          "Close! But check your left hand orientation again.",
          "Left hand: point fingers upward (velocity), curl toward right (field), thumb points out of page.",
          "‚úì Correct! For negative charges, use the left hand rule. Fingers point up (velocity), curl right (field), thumb points out of the page."
        ],
        hint: "Remember: RIGHT hand for positive charges, LEFT hand for negative charges."
      },
      {
        question: "A positive charge is moving into the page with a magnetic field pointing downward. Using the right hand rule, which direction is the force?",
        options: [
          "To the right",
          "To the left",
          "Into the page",
          "Out of the page"
        ],
        correct: 0,
        feedback: [
          "‚úì Correct! Point fingers into the page (velocity), curl them downward (field), thumb points to the right.",
          "That's the opposite direction.",
          "The force is perpendicular to both velocity and field.",
          "That's the opposite direction."
        ],
        hint: "Fingers = velocity (into page), curl = magnetic field (downward). Where does your thumb point?"
      }
    ];

    // Lorentz Force Calculations
    const calcQuestions = [
      {
        question: "A glass ball with charge 1.21 √ó 10‚Åª‚Å∏ C is thrown east at 9.41 m/s through Earth's magnetic field (5.01 √ó 10‚Åª‚Åµ T, pointing north). What is the magnitude of the magnetic force? (F = qv‚ä•B)",
        options: [
          "5.70 √ó 10‚Åª¬π¬≤ N",
          "5.70 √ó 10‚Åª¬π‚Åµ N",
          "1.22 √ó 10‚Åª¬π¬π N",
          "8.44 √ó 10‚Åª‚Å∂ N"
        ],
        correct: 0,
        feedback: [
          "‚úì Correct! F = (1.21 √ó 10‚Åª‚Å∏ C)(9.41 m/s)(5.01 √ó 10‚Åª‚Åµ T) = 5.70 √ó 10‚Åª¬π¬≤ N",
          "Check your multiplication.",
          "Verify your order of magnitude.",
          "This is too large."
        ],
        hint: "Use FM = qvB. Multiply: charge √ó velocity √ó magnetic field strength."
      },
      {
        question: "A balloon with charge ‚Äì0.973 ŒºC moves east with a magnetic force of 8.11 √ó 10‚Åª¬π‚Å∞ N pointing west. Earth's magnetic field is 5.01 √ó 10‚Åª‚Åµ T (pointing north). What is the velocity of the balloon?",
        options: [
          "‚Äì16.6 m/s",
          "3.95 √ó 10‚Åª¬≤‚Å∞ m/s",
          "8.44 m/s",
          "16.6 m/s"
        ],
        correct: 3,
        feedback: [
          "The negative sign indicates direction, but the magnitude is positive.",
          "Check your calculation - you may have an error in order of magnitude.",
          "Recheck your math.",
          "‚úì Correct! v = F/(qB) = (8.11 √ó 10‚Åª¬π‚Å∞ N)/((0.973 √ó 10‚Åª‚Å∂ C)(5.01 √ó 10‚Åª‚Åµ T)) = 16.6 m/s"
        ],
        hint: "Rearrange the formula: v = F / (qB). The velocity magnitude is positive; direction is separate."
      },
      {
        question: "If you double the charge and double the magnetic field strength while keeping velocity constant, what happens to the magnetic force?",
        options: [
          "The force increases by a factor of 2",
          "The force increases by a factor of 4",
          "The force stays the same",
          "The force decreases by a factor of 2"
        ],
        correct: 1,
        feedback: [
          "Doubling charge increases F by 2, but what about doubling B?",
          "‚úì Correct! The formula FM = qv‚ä•B shows force is directly proportional to all three quantities. Doubling both q and B means 2 √ó 2 = 4 times the force.",
          "The formula shows force depends on q and B.",
          "The force increases, not decreases."
        ],
        hint: "Look at the formula FM = qv‚ä•B. What happens when both q and B are doubled?"
      }
    ];

    // Advanced Concepts Questions
    const advancedQuestions = [
      {
        question: "What is the relationship between the Lorentz force equation F = qE + (qv √ó B) and the magnetic force equation FM = qvB?",
        options: [
          "They are unrelated equations",
          "The FM = qvB is the electric component of the Lorentz force",
          "The FM = qvB is the magnetic component of the Lorentz force, showing just the qv √ó B part",
          "The Lorentz equation is wrong"
        ],
        correct: 2,
        feedback: [
          "They are actually closely related.",
          "That's the qE part, not the qv √ó B part.",
          "‚úì Correct! The magnetic component FM = qvB (when perpendicular) comes from the qv √ó B term in the full Lorentz equation.",
          "The Lorentz equation is fundamental to electromagnetism."
        ],
        hint: "The Lorentz force has two components: electric (qE) and magnetic (qv √ó B)."
      },
      {
        question: "Why is the cross product (√ó) important in the magnetic force equation (qv √ó B)?",
        options: [
          "It's just mathematical notation with no physical meaning",
          "It extracts the perpendicular component of velocity, since the magnetic field only acts on velocity perpendicular to the field",
          "It makes the equation look more complicated",
          "It represents multiplication of the terms"
        ],
        correct: 1,
        feedback: [
          "The cross product has important physical meaning.",
          "‚úì Exactly! The cross product ensures we use only the component of velocity perpendicular to the field, which is what creates the force.",
          "Mathematics serves a purpose!",
          "The cross product is different from regular multiplication."
        ],
        hint: "Think about what happens when velocity is parallel vs. perpendicular to the magnetic field."
      },
      {
        question: "Which of the following is a pattern shared by both magnetic and electric fields?",
        options: [
          "They are both produced by charges",
          "They both have a north and south pole",
          "The force gets stronger as distance decreases",
          "Both A and C"
        ],
        correct: 3,
        feedback: [
          "Both are produced by charges, but is that the only similarity?",
          "Only magnets have north and south poles.",
          "This is true for both types of fields, but does it apply to A?",
          "‚úì Correct! Both fields are produced by charges, and both have forces that increase as distance decreases. However, electric fields have positive/negative charges, while magnetic fields have north/south poles."
        ],
        hint: "Consider the sources of the fields and how force varies with distance."
      }
    ];

    // State management
    let state = {
      conceptual: new Array(conceptualQuestions.length).fill(false),
      hand: new Array(handQuestions.length).fill(false),
      calc: new Array(calcQuestions.length).fill(false),
      advanced: new Array(advancedQuestions.length).fill(false),
      attempts: {
        conceptual: new Array(conceptualQuestions.length).fill(0),
        hand: new Array(handQuestions.length).fill(0),
        calc: new Array(calcQuestions.length).fill(0),
        advanced: new Array(advancedQuestions.length).fill(0)
      }
    };

    // Initialize on load
    window.addEventListener('DOMContentLoaded', () => {
      renderQuestions('conceptual', conceptualQuestions, 'conceptualContainer');
      renderQuestions('hand', handQuestions, 'handContainer');
      renderQuestions('calc', calcQuestions, 'calcContainer');
      renderQuestions('advanced', advancedQuestions, 'advancedContainer');
    });

    function renderQuestions(section, questions, containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      
      questions.forEach((q, idx) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'question-container';
        if (state[section][idx]) qDiv.classList.add('completed');
        
        let optionsHTML = '';
        q.options.forEach((opt, optIdx) => {
          optionsHTML += `
            <label class="option-label" id="${section}-opt-${idx}-${optIdx}">
              <input type="radio" name="${section}-q${idx}" value="${optIdx}" onchange="selectOption('${section}', ${idx}, ${optIdx})">
              <span class="option-text">${opt}</span>
            </label>
          `;
        });
        
        qDiv.innerHTML = `
          <div class="question-text">Q${idx + 1}: ${q.question}</div>
          <div class="options" id="${section}-options-${idx}">
            ${optionsHTML}
          </div>
          <div class="feedback" id="${section}-feedback-${idx}"></div>
          <div class="attempt-counter" id="${section}-attempts-${idx}"></div>
          <div class="hint-text" id="${section}-hint-${idx}" style="display: none;"><strong>Hint:</strong> ${q.hint}</div>
          <div class="button-group">
            <button class="hint-btn" onclick="showHint('${section}', ${idx})">Hint</button>
            <button class="check-btn" onclick="checkAnswer('${section}', ${idx}, ${q.correct}, ${idx})">Check Answer</button>
          </div>
        `;
        container.appendChild(qDiv);
      });
    }

    function selectOption(section, qIdx, optIdx) {
      const labels = document.querySelectorAll(`label[id^="${section}-opt-${qIdx}"]`);
      labels.forEach((label, idx) => {
        label.classList.toggle('selected', idx === optIdx);
      });
    }

    function checkAnswer(section, qIdx, correctIdx, questionIdx) {
      // Get feedback from the appropriate questions array
      let feedback;
      if (section === 'conceptual') feedback = conceptualQuestions[qIdx].feedback;
      else if (section === 'hand') feedback = handQuestions[qIdx].feedback;
      else if (section === 'calc') feedback = calcQuestions[qIdx].feedback;
      else if (section === 'advanced') feedback = advancedQuestions[qIdx].feedback;
      
      const radioButtons = document.querySelectorAll(`input[name="${section}-q${qIdx}"]`);
      
      let selectedIdx = -1;
      radioButtons.forEach((radio, idx) => {
        if (radio.checked) {
          selectedIdx = idx;
        }
      });

      if (selectedIdx === -1) {
        alert('Please select an option!');
        return;
      }

      const feedbackDiv = document.getElementById(`${section}-feedback-${qIdx}`);
      const attemptsDiv = document.getElementById(`${section}-attempts-${qIdx}`);
      
      state.attempts[section][qIdx]++;
      const attemptNum = state.attempts[section][qIdx];

      if (selectedIdx === correctIdx) {
        feedbackDiv.className = 'feedback show correct';
        feedbackDiv.textContent = feedback[selectedIdx];
        attemptsDiv.textContent = `‚úì Completed in ${attemptNum} attempt${attemptNum > 1 ? 's' : ''}`;
        
        state[section][qIdx] = true;
        document.getElementById(`${section}-options-${qIdx}`).closest('.question-container').classList.add('completed');
        
        // Disable all options and buttons
        radioButtons.forEach(radio => radio.disabled = true);
        const buttons = document.querySelector(`#${section}-feedback-${qIdx}`).closest('.question-container').querySelectorAll('button');
        buttons.forEach(btn => btn.disabled = true);
      } else {
        feedbackDiv.className = 'feedback show incorrect';
        feedbackDiv.textContent = feedback[selectedIdx];
        attemptsDiv.textContent = `Attempt ${attemptNum}`;
      }

      updateProgress();
    }

    function showHint(section, qIdx) {
      const hintDiv = document.getElementById(`${section}-hint-${qIdx}`);
      hintDiv.classList.toggle('show');
    }

    function updateProgress() {
      const sections = [
        { name: 'conceptual', length: conceptualQuestions.length },
        { name: 'hand', length: handQuestions.length },
        { name: 'calc', length: calcQuestions.length },
        { name: 'advanced', length: advancedQuestions.length }
      ];

      let totalComplete = 0;
      let totalQuestions = 0;

      sections.forEach(sec => {
        const complete = state[sec.name].filter(x => x).length;
        const percent = Math.round((complete / sec.length) * 100);
        
        document.getElementById(`${sec.name}Progress`).textContent = complete;
        document.getElementById(`${sec.name}Percent`).textContent = `${percent}%`;
        document.getElementById(`${sec.name}Bar`).style.width = `${percent}%`;
        
        totalComplete += complete;
        totalQuestions += sec.length;
      });

      const overallPercent = Math.round((totalComplete / totalQuestions) * 100);
      
      if (overallPercent === 100) {
        document.getElementById('masteryScreen').classList.add('show');
      }
    }
  </script>
</body>
</html>
